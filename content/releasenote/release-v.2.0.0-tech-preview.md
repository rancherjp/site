---
date: "2017-11-11"
title: "リリース v2.0.0 テクニカルプレビュー"
slug: "v2.0.0 テクニカルプレビュー"
author: "Rancher JP"
description: "リリース v2.0.0 テクニカルプレビュー"
≈: false
tags:
  - "releasenote"
categories:
  - "releasenote"
archives:
  - "2017"
  - "2017/11"
---

# リリース v2.0.0 テクニカルプレビュー

Rancher 2.0のテクニカルプレビューが利用可能になったことをお知らせします。<br>
このリリースは、我々のエンジニアチームが直近7ヶ月もの間多忙を極め、ようやく何をやったのかについてベールを脱ぐことができることをとても嬉しく思っております。<br>
今回の初リリースに加え、追加機能の紹介、バグへの対応、皆様の貴重なフィードバックなどを組み込むために、RC版のビルドを定期的に公開する予定です。

では、何が新しくなったか見ていきましょう。

2.0では、Rancherは自身のアーキテクチャと全てのクラスタ/環境をKubernetes上に置いています。1.0が既にKubernetesのインストール、管理、運用をサポートしてはいますが、Rancherのユーザーエクスペリエンスとして物足りなさを感じていました。<br>
2.0ではそれを改善し、ネイティブに対応したKubernetesダッシュボードUIとkubectlにアクセス可能になっただけではなく、RancherのUX(CLI, API, UIおよびDocker)はすべてKubernetes上で直接的に動作します。<br>
2.0は、既存のRancherのすべての機能を引き続き継承しながらも、Kubernetesの豊かなエコシステムと革新的な技術を活用することができる、Kubernetes環境の強化されたアドオンであると考えていただければと思います。<br>

また、我々は、このリリースはDockerとKubernetesの日常利用を信じられないほど単純なものにするための次のステップだと確信しております。是非、ご自身でビルドをお試しください。<br>
そして、皆様のご意見やご提案をお寄せください。

## 参考リンク
- Quick Start Guide(英語): http://rancher.com/docs/rancher/v2.0/en/quick-start-guide/
- フィードバック、コメント、提案用のフォーラム(英語): https://forums.rancher.com/c/rancher-2-0-tech-preview
- User Slack(英語): https://slack.rancher.io/ #2-0-tech-preview
- RancherJP Slack: http://slack.rancher.jp/

## 重要事項
テクニカルプレビューの目的として、GA版のリリースに至るまでは全て `rancher/server:preview` タグにて最新ビルドをアップデートいたします。<br>
GA版のリリースが固まり次第、 `latest` や `stable` についても必要に合わせ更新していきます。

## プレビューの最新バージョンタグ
> **注意**: 全ての最新機能を試すためにはrancher/server:previewをご利用ください

- rancher/server:v2.0.0-alpha10
- rancher/agent:v2.0-alpha4
- rancher/lb-service-haproxy:v0.8.1
- rancher-v1.0.0-alpha3

## 対応しているDockerのバージョン

- Docker 1.12.6
- Docker 1.13.1
- Docker 17.03.0-ce
- Docker 17.06.0-ce

## 追加機能

> **注意**: テクニカルプレビューにおいては、全機能が使用できるわけではない点についてご理解ください。<br>
管理パネル上で無効になっている機能がある場合もあります。開発チームとしても、できるだけ早い段階で提供できるようにいたします。

以下、本ビルドで追加された主な機能について紹介します。

- **2.0 UI** - Kubernetes上でRancherのUXを提供するために、UIを作り直しました。以下の変更を行っております。
  - "exec shell"と"view logs"の画面サイズを変更可能にした → 旧UIで最も要望の高かった変更の一つです。

  - 任意の資源(リソース)に対して、アクションを複数同時に実行可能になった
  - Rancher上の殆どのリソース(コンテナ、ホスト、カタログなど)を検索できるオプションを追加
  - コンテナとホスト用の、フィルターオプションとテーブルヘッダを含む新しいリストビュー、テーブルビュー
  - 検索機能向上を目的としてカタログページをリニューアルした 管理しやすいように各カタログが含むインスタンス一覧を"Apps"配下に表示
  - コンテナ/ホスト管理/詳細/新規作成のページを一新
  - 古いバージョンとのdiffを表示、任意のリビジョンに切り戻す機能などを、ロールバックについて機能を向上
  - その他、UIの全般的な応答速度などを速めた

- **クラスターと環境** - Kubernetesの優位性を活かし、Rancherでもついにクラスターの概念を導入、これによってクラスター上で(K8s namespaceのように)複数環境を構築できるようになりました。<br>
複数コンテナが物理的に同じノードを共有しながらも、8s namespaceを利用してそれぞれ独立したワークスペースを所有できるようになります。

- **Kunernetes環境のインポート** - Rancherを使ってどこからでもK8sクラスターを管理できるようになります。Rancher上で管理されるあなた自身のK8s clusterを作成するということもできます。<br>
また、GKEやACSなどの主要なホスティングプロバイダ上の環境にとどまらず、kopsやkubeadmを使って構築した自前のクラスターに至るまで、Rancher上にインポートが可能です。 

- **ホストテンプレート** - RancherのDocker Machineインテグレーションを使って新規作成したホストは全て自動的にテンプレート化されるようになります。<br>
同一環境を追加で同じクラウドプロバイダーから作成する際に情報を再入力することなく、迅速にホストを立てることができます。

## 既知の主要なバグ

- Systemの状態がHealthyになる前にコンテナを作成すると、次のエラーが表示されることがわかっています。<br>
"service account default/default was not found, retry after the service account is created"<br>
これは、最初のノードが追加される際、k8s componentsや全ての要求システムが立ち上がるまでに数分の時間を要することが原因です。管理画面右上のSystemよりヘルスチェックを行うことができます。<br>
一度Systemの状態がHealthyになれば、コンテナの追加や再構築などを行うことができます。

- このテクニカルプレビュー時点では、前バージョンからのアップデート、HAモードやDockerhubへのアクセスについてはサポート対象外です(エアギャップ環境もサポートされていません)。

- Kubernetesからインポートされたクラスターのノードを削除しても、ランチャー上に正常反映されません。

- クラウドプロバイダー経由でホストを追加する際に一定条件下でバグが発生することがわかっています。もし遭遇した場合は、一度ホストを削除してから再試行してください。

- 現在、Anonymous volumeとNamed volumeがRancher上で正常に動作しないことがわかっています。そのため、カタログについても各ボリュームを利用しているものについては選択不可となっております。<br>
それらについてはサポートされ次第順次開放予定です。

## 追記の修正
2017/11/20時点で(v2.0.0-alpha10)、以下の機能について追加が行われています。
- 外部のデータベースとSSLをインストールする機能を追加
- プライベートレジストリを使用する機能を追加
- インターネットにアクセスすることなくUIを動かす機能を追加
